---
layout: post
title: CS50x 03 - Arrays
categories:
    - CS50x
tags:
    - CS
---

## 函数

### 函数的定义

函数定义提供了函数的实际主体。函数也叫方法。

```c
return_type function_name( parameter list )
{
   body of the function
}
```

### 函数的声明

函数声明会告诉编译器函数名称及如何调用函数。在函数声明中，参数的名称并不重要，只有参数的类型是必需的。

在文件主体中，可以将函数的声明放在main()之前，而函数的定义可以放在main()之后。

### 函数参数

函数中，接受参数值的变量称为函数的形式参数。形式参数在进入函数时被创建，退出函数时被销毁。

向函数传递参数的方式：

- 传值调用：将参数的实际值复制给函数的形式参数。函数内的形式参数修改并不会影响实际参数。
  
- 引用调用：通过指针传递方式，形参为指向实参地址的指针。对形参的指向操作就相当于对实参本身进行的操作。
  

默认情况下，C使用**传值调用**来传递参数。

## 变量

### 变量的定义

变量定义就是告诉编译器在何处创建变量的存储，以及如何创建变量的存储。变量定义指定一个数据类型，并包含了该类型的一个或多个变量的列表。

变量可以在声明的时候初始化。

```c
type variable_list;
type variable_name = value; //定义并初始化
```

### 变量的声明

变量声明向编译器保证变量以指定的类型和名称存在，这样编译器在不需要知道变量完整细节的情况下也能继续进一步的编译。变量声明有两种情况：

- 1、一种是需要建立存储空间的。例如：int a 在声明的时候就已经建立了存储空间。
- 2、另一种是不需要建立存储空间的，通过使用extern关键字声明变量名而不定义它。 例如：extern int a 其中变量 a 可以在别的文件中定义的。
- 除非有extern关键字，否则都是变量的定义。

```c
extern int i; //声明，不是定义
int i; //声明，也是定义
```

### 声明和定义

变量定义：用于为变量分配存储空间，还可为变量指定初始值。程序中，变量有且仅有一个定义。

变量声明：用于向程序表明变量的类型和名字。

定义也是声明，extern声明不是定义。

当你要引用一个全局变量的时候，就要声明 extern int a。

### 左值（lvalues）和右值（rvalues）

1. 左值（lvalue）：指向内存位置的表达式被称为左值（lvalue）表达式。左值可以出现在赋值号的左边或右边。
2. 右值（rvalue）：存储在内存中某些地址的数值。右值是不能对其进行赋值的表达式，也就是说，右值可以出现在赋值号的右边，但不能出现在赋值号的左边。

在一个表达式中，左值必须是变量，右值可以是变量，常量或者表达式。必要的时候，lvalues可以转换为rvalues。但rvalues不能转换为lvalues。

## 作用域

作用域是程序中定义的变量所存在的区域，超过该区域变量就不能被访问。C 语言中有三个地方可以声明变量：

1. 在函数或块内部的**局部**变量
2. 在所有函数外部的**全局**变量
3. 在**形式**参数的函数参数定义中

### 局部变量

在某个函数或块的内部声明的变量称为局部变量。它们只能被该函数或该代码块内部的语句使用。

### 全局变量

全局变量是定义在函数外部，通常是在程序的顶部。全局变量在整个程序生命周期内都是有效的，在任意的函数内部能访问全局变量。

在程序中，局部变量和全局变量的名称可以相同，但是在函数内，如果两个名字相同，会使用局部变量值，全局变量不会被使用。

### 形式参数

函数的参数，形式参数，被当作该函数内的局部变量，如果与全局变量同名它们会优先使用。

> **全局变量与局部变量在内存中的区别**：
> 
> - 全局变量保存在内存的全局存储区中，占用静态的存储单元；
> - 局部变量保存在栈中，只有在所在函数被调用时才动态地为变量分配存储单元。

### 初始化

局部变量被定义时，不会初始化。全局变量系统会自动对其初始化。

| 数据类型 | 初始化默认值 |
| --- | --- |
| int | 0   |
| char | '\0' |
| float | 0   |
| double | 0   |
| pointer | NULL |

## 数组

数组存储一个固定大小的、相同类型元素的顺序集合。声明一个数组array后，用索引（array[n]）来访问数组中的元素。

所有的数组都是由连续的内存位置组成。最低的地址对应第一个元素，最高的地址对应最后一个元素。

### 声明数组

需要指定数组元素的类型和元素的数量。

```c
type arrayName [ arraySize ];
```

arraySize必须是一个大于零的整数常量，type可以是任意有效的 C 数据类型。

### 初始化数组

C中可以逐个初始化数组，也可以用初始化语句。

```c
double balance[5] = {1000.0, 2.0, 3.4, 7.0, 50.0};
double balance[5] = {1000.0, 2.0, 3.4, 7.0}; //第五个数自动初始化为0
double balance[] = {1000.0, 2.0, 3.4, 7.0, 50.0}; //若省略数组大小，则数组大小等于初始化时元素个数
balance[4] = 50.0; //也可以单独为某一个元素
```

### 访问数组

通过索引对数组中的元素进行访问。

> 注意，C不能直接将一个数组赋值给另一个数组（而需要使用循环依次赋值）。

### 传递数组给函数

将数组传递进函数使用的是**引用调用**，告诉编译器将要接收一个整型指针。

传递方式：

```c
void myFunction(int *param) //形参是一个指针
{
}
```

```c
void myFunction(int param[10]) //形参是一个已知大小的数组
{
}
```

```c
void myFunction(int param[]) //形参是一个未定义大小的数组
{
}
```

### 多维数组

C语言支持多维数组。二维数组在本质上是一个一维数组的列表。

多维数组声明的一般形式如下：

```c
type name[size1][size2]...[sizeN];
```

## 命令行参数

执行程序时，可以从命令行传值给 C 程序。这些值被称为**命令行参数**。

命令行参数是使用 main() 函数参数来处理的，其中，**argc** 是指传入参数的个数，**argv[]** 是一个指针数组，指向传递给程序的每个参数。

多个命令行参数之间用空格分隔，但是如果参数本身带有空格，那么传递参数的时候应把参数放置在双引号 "" 或单引号 '' 内部。

**argv[0]** 存储程序的名称，**argv[1]** 是一个指向第一个命令行参数的指针，*argv[n] 是最后一个参数。

```c
int main( int argc, char *argv[] ) 
```